---
title: "Assignment 2"
author: "Edward Kim"
date: "9/20/2020"
output: github_document 
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r,message = FALSE, include = FALSE}
library(tidyverse)
library(dplyr)
library(data.table)
library(readr)
```

```{r}
download.file("https://raw.githubusercontent.com/USCbiostats/data-science-data/master/01_chs/chs_individual.csv", destfile= "individual.csv")
download.file("https://raw.githubusercontent.com/USCbiostats/data-science-data/master/01_chs/chs_regional.csv", destfile = "regional.csv")

individual <- data.table::fread("individual.csv")
regional <- data.table::fread("regional.csv")

```

# 1. Merge the two data sets 


```{r}

merge <-merge(
  x = individual,
  y = regional,
  by.x = "townname",
  by.y = "townname",
  all.x = TRUE,
  all.y = TRUE)

head(merge)
merge %>% nrow()
```

The two dataset for the individual and regional levels were merged using the location (townname). There is a total of 1200 rows, which confirms that there was no duplicates in the data. There is 49 total variables, which is consistent with the variables present in both datasets. 


# 2. Create new categorical variable 
```{r}
merge <- merge %>% 
  mutate("obesity_level" = case_when( bmi<14 ~ "Underweight",
                                      bmi>=14 & bmi <22 ~"Normal",
                                      bmi>=22 & bmi<24 ~"Overweight",
                                      bmi>=24 ~ "Obese")
         )

summary(merge$bmi)
merge %>% count(obesity_level)
```

The summary table shows that there are 89 NA's in the BMI variable, which accounts for the 89 NA variables that were counted in the total observations per BMI category. 

Because the mean BMI of 18.5 and the median BMI of 17.48 are both in the Healthy category, a majority of the observations would be Healthy.

# 3. Create Categorical Variable "Smoke_gas_exposure" 

```{r}
merge %>% group_by(smoke,gasstove) %>% count()
merge <- merge %>% mutate(smoke_gas_exposure = case_when(smoke==0 & gasstove ==0 ~ "No Exposure",
                                                         smoke==0 & gasstove==1 ~ "Gas Exposure",
                                                         smoke==1 & gasstove ==0~ "Smoke Exposure",
                                                         smoke==1 & gasstove ==1 ~ "Smoke and Gas Exposure")
                          )
merge %>% count(smoke_gas_exposure)
```
Four different categories were created indicating whether the participant was exposed to second-hand smoke, a gas stove, or both.



